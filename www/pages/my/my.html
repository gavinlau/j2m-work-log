<template>
	<div class="page" data-name="settings">
		<div class="navbar">
			<div class="navbar-inner sliding">
				<div class="title">我的</div>
			</div>
		</div>
		<div class="page-content ptr-content" data-ptr-distance="55">
			<!-- Default pull to refresh preloader-->
			<div class="ptr-preloader">
				<div class="preloader"></div>
				<div class="ptr-arrow"></div>
			</div>
			<div class="list">
				<ul>
					<li>
						<div class="item-content" style="height:86px;">
							<div class="item-media">
								<a class="icon-only">
									<i class="icon f7-icons ios-only" style="font-size:36px;">person_fill</i>
									<i class="icon material-icons md-only" style="font-size:36px;">person</i>
								</a>
							</div>
							<div class="item-inner">
								<div class="item-title">
									<div class="item-title">刘洪义</div>
								</div>

								<div class="item-after">
									<button class="col button button-fill color-gray">签到</button>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>


			<div class="block">
				<div class="row">
					<button class="col button button-fill color-red" @click="logout">退出登录</button>
				</div>
			</div>

		</div>
	</div>
</template>
<style scoped>
	.size-22 {
		font-size: 22px
	}

	.size-25 {
		font-size: 25px
	}

	.size-29 {
		font-size: 29px
	}

	.size-50 {
		font-size: 50px
	}

	.size-60 {
		font-size: 60px
	}
</style>
<script>
	return {
		data: function () {
			return {
				products: this.$root.products
			}
		},
		on: {
			pageInit: function () {
				var $ptrContent = $$('.ptr-content');
				$ptrContent.on('ptr:refresh', function (e) {

					setTimeout(function () {
						app.ptr.done(); // or e.detail();
					}, 2000);
				});
			},
			pageAfterOut: function () {
				// page has left the view
			}
		},
		methods: {
			//
			login: function () {
				var self = this;
				var params = {
					companyId: 20155,
					account: 'a13961879161',
					password: '~Admin123'
				};
				app.request.post(app.data.baseURL + '/j2-api/login/account_login', params, function (data) {
					var res = JSON.parse(data);
					app.data.userId = res.uesrId;
					app.data.p_auth = res.p_auth;
				});
				app.request.post(app.data.baseURL, {}, function (data) {
					console.log(j2Utils.logFlag, 'DDDD');
				});
			},

			userList: function () {
				var params = {
					cmd: "{'/J2eecn-Api-hook.japi/get-users-and-teams-by-group-id':{}}",
					p_auth: app.data.p_auth,
					qName: '',
					groupId: 249479,
					page: 1,
					rows: 20
				};
				app.request.post(app.data.baseURL + '/api/jsonws/invoke', params, function (data) {
					var res = JSON.parse(data);
					app.dialog.alert(res.message);
					console.log(data);
				});
			},
			//
			logout: function () {
				var router = this.$router;
				f7J2Utils.logout();
				router.navigate('/login-ways/', { reloadCurrent: true, animate: false });
				app.toolbar.hide('.toolbar');
			},
		}
	}
</script>